package net.area80.ui.skin{	import flash.display.DisplayObject;	import flash.display.Loader;	import flash.display.MovieClip;	import flash.display.Sprite;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.net.URLRequest;	import flash.system.ApplicationDomain;	import flash.system.LoaderContext;	import flash.text.TextField;		import org.osflash.signals.Signal;	public class FBFriendListItemSkin extends MovieClip	{				public var uName:String;		public var uId:String;		public var nameText:TextField;		public var imageBackground:Sprite;		public var ld:Loader;		public var token:String;		public var SIGNAL_SELECTED:Signal;		public static var SELECTED:Boolean = true;		public static var DESELCTED:Boolean = false;				public function FBFriendListItemSkin($name:String, $id:String) 		{			stop();						uName = $name;			uId = $id;			this.buttonMode = true;			this.nameText.mouseEnabled = false;			SIGNAL_SELECTED = new Signal(DisplayObject,Boolean);			addEventListener(Event.ADDED_TO_STAGE,init,false,0,true);			addEventListener(Event.REMOVED_FROM_STAGE,dispose,false,0,true);			addEventListener(MouseEvent.CLICK,click);		}		private function init(e:Event):void		{						nameText.text = uName;						var separateDefinitions:LoaderContext = new LoaderContext();			separateDefinitions.checkPolicyFile = true;			separateDefinitions.applicationDomain = new ApplicationDomain(ApplicationDomain.currentDomain);			ld = new Loader();			ld.load(new URLRequest("https://graph.facebook.com/"+uId+"/picture"),separateDefinitions);			ld.x = imageBackground.x;			ld.y = imageBackground.y;			addChild(ld);		}		private function click(e:MouseEvent):void		{			if(currentFrame==1){				this.gotoAndStop(2);				SIGNAL_SELECTED.dispatch(this,SELECTED);			}else{				this.gotoAndStop(2);				SIGNAL_SELECTED.dispatch(this,DESELCTED);			}					}		private function dispose(e:Event):void		{			removeChild(ld);		}	}}